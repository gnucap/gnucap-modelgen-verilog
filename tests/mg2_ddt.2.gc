attach ../modelgen_0.so
attach ../d_vasrc.so

spice
.subckt vsin p n
.parameter ampl
.parameter dc
V1 p n sin freq=1 amplitude={ampl} dc=dc
.ends

.verilog

`modelgen
module test_tcap0(p, n, cp, cn);
	electrical p, n, cp, cn;
	analog begin
		I(p,n) <+ ddt(V(cp,cn));
	end
endmodule

!make test_tcap0.so > /dev/null
attach ./test_tcap0.so

test_tcap0 #() dut(3,0,1,0);

spice
V1  1  0  SIN  offset= 0.  amplitude= 1.  frequency= 1.  delay= 0.  damping= 0.
R2  3  0  1.
* .tcap C2  3  0  1  0  1.
.print tran v nodes
.tran 1
