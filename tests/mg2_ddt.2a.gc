attach ../modelgen_0.so


spice
.subckt vsin p n
.parameter ampl
.parameter dc
V1 p n sin freq=1 amplitude={ampl} dc=dc
.ends

.verilog

`modelgen
module test_tcap0a(p, n, cp, cn);
	electrical p, n, cp, cn;
	analog begin
		I(p,n) <+ 2*ddt(.5*V(cp,cn));
	end
endmodule

!make test_tcap0a.so > /dev/null
attach ./test_tcap0a.so

test_tcap0a #() dut(3,0,1,0);

spice
V1  1  0  SIN  offset= 0.  amplitude= 1.  frequency= 1.  delay= 0.  damping= 0. ac 1
R2  3  0  1.
* .tcap C2  3  0  1  0  1.
.print tran v nodes iter(0)
.print ac vm(nodes) vp(nodes)
.tran 1
.ac 1 10 * 2
.status notime
