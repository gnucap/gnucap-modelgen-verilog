
attach ./modelgen_0.so


verilog

`modelgen
module test_af_0(p, n);
	electrical p, n;
	parameter real v = 1;

	analog function real fct;
		input x;
		real x;
		begin
			real a;
			a = .2 + 0.*x;
			fct = exp(a*v);
		end
	endfunction
	analog function real unused0;
		input x;
		real x;
		begin
			unused0 = x;
		end
	endfunction
	analog function real unused1;
		input x;
		real x;
		begin
			unused1 = x;
		end
	endfunction

	analog begin
		real v;
		V(p, n) <+ fct(v);
		if(0.) v = unused1(v+2);
	end
endmodule
 
!make test_af_0.so > /dev/null
attach ./test_af_0.so

parameter v1=0
test_af_0 #(.v(v1)) dut(1,0);

list

print dc v(nodes) iter(0)
dc v1 -5 10 2
end
