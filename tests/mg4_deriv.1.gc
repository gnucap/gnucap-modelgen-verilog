

attach ../modelgen_0.so


verilog

options gmin=0.

`modelgen
module test_deriv1(p, c)
	electrical p, c;

	analog begin
		I(p) <+ - exp( V(c)/17 );
		I(p) <+ - ln( 1+V(c) );
		I(p) <+   tanh( V(c) );
		I(p) <+ - pow( V(c), 1/3 );
		I(p) <+   pow( 2., V(c) );
		I(p) <+ - sqrt( V(c) );
	end

endmodule

!make test_deriv1.so > /dev/null
attach ./test_deriv1.so

test_deriv1 #() dut(1, 2);

parameter v=0
// vsource #(.dc(v)) v1(2,0);
resistor #(.r(100)) r1(1,0);

list

spice
.options noinsensitive
V1 2 0 ac 1 dc v

.store dc v(nodes)
.print dc v(nodes) iter(0)
.dc v 0.4999 0.5001 .00001 > /dev/null
.measure gain=at(probe="v(1)" x=".5" deriv)
.dc v .5 .5 0
.print ac vm(1) vp(1)
.ac 1
