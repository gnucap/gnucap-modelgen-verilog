
attach ../modelgen_0.so


spice
.subckt vsin p n
.parameter ampl
.parameter dc
V1 p n sin freq=1 amplitude={ampl} dc=dc
.ends

.verilog

`modelgen
module test_xdt2(out, n, in);
  electrical out, in, n;
  parameter real c=1;
  analog begin
    I(out,n) <+ -ddt(-c*V(in,n));
  end
endmodule

!make test_xdt2.so > /dev/null

attach ./test_xdt2.so

verilog

test_xdt2 #(.c(c)) dut(out, 0, in);
resistor #(.r(1)) r(0, out);

parameter v=0
parameter c=1m
vsin #(.dc(v), .ampl(1)) v1(in, 0);

print tran v(in) v(r) iter(0)
tran .5
status notime
