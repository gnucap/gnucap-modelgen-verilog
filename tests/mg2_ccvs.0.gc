
attach ../modelgen_0.so


verilog

`modelgen
module test_ccvs0(p, n, cp, cn);
electrical p, n, cp, cn;

(* desc="cin" *) real cin;
analog begin
	real gain;
	gain = 3;
	cin = I(cp, cn);
	V(p,n) <+ gain * cin;
end

endmodule

!make test_ccvs0.so > /dev/null
attach ./test_ccvs0.so

test_ccvs0 d1(2, 0, 1, 0);
resistor #(.r(1)) r1(2, 0);

isource #(.dc(i)) i1(0, 1);
resistor #(.r(10.00001u)) r0(1, 0);

parameter i=1
list

print dc v(nodes) i(i1) iter(0) i(d1._b_cp_cn) i(r0) cin(d1)
dc i 0 2 .5
end
