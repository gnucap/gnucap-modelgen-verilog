
attach ./modelgen_0.so
attach vams/resistor.so
options picky

verilog

`modelgen test_rn0
module test_rn0(p, n);
	electrical p, n, b;
	inout p, n;
	parameter real r=1;
	parameter real mm=1;
	analog begin
		I(p,n) <+ white_noise(4 * 1.3806505e-23 * (1/r) * $temperature * mm) ;
		I(p,n) <+ V(p,n)/r*mm;
	end
endmodule

list

!make test_rn0.so > /dev/null
attach ./test_rn0.so

// resistor does I(p,n) <+ white_noise(noisy * 4 * `P_K * g * $temperature, "thermal");
resistor #(.r(100) .noisy(1)) r(0,1);
test_rn0 #(.r(100)) dut(2, 0);

test_rn0 #(.$mfactor(1) .r(200)) r(3,0);
test_rn0 #(.$mfactor(1) .r(200)) r(3,0);

resistor #(.$mfactor(2) .r(200) .noisy(1)) r(0,4);

test_rn0 #(.$mfactor(2) .mm(.5) .r(100)) dut(5, 0);
test_rn0 #(.$mfactor(.5) .mm(2) .r(100)) dut(6, 0);

test_rn0 #(.mm(.5), .$mfactor(4) .r(200)) dut(7, 0);

list

noise_probe n1(1)
noise_probe n2(2)
noise_probe n3(3)
noise_probe n4(4)
noise_probe n5(5)
noise_probe n6(6)
noise_probe n7(7)
noise_probe n8(8)

list

print ac nv(n1 n2 n3 n4)
print dc v(1)
dc
ac

print ac nv(n5 n6 n7 n8)
ac

status notime
end
