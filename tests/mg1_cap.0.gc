
attach ../modelgen_0.so
attach ../d_vasrc.so

spice
.subckt vsin p n
.parameter ampl
.parameter dc
V1 p n sin freq=1 amplitude={ampl} dc=dc
.ends

.verilog

`modelgen
module test_cap0(p, n);
  electrical p, n;
  parameter real c=1;
  analog begin
    I(p,n) <+ ddt(c*V(p,n));
  end
endmodule

!make test_cap0.so > /dev/null

attach ./test_cap0.so

verilog

resistor #(.r(1)) r(in, out);
test_cap0 #(.c(c)) dut(out, 0);
// capacitor #(.c(c)) c(out, 0);

parameter v=0
parameter c=1m
vsin #(.dc(v), .ampl(1)) v1(in, 0);

print dc v(nodes) iter(0)
dc v -10 10 2

print tran v(nodes) iter(0)
tran .5
status notime
