# Makefile fragment for modelgen-verilog
# ... for use with configure & GNU Make aka. "gmake"
# Author: Felix Salfelder 2024
#-----------------------------------------------------------------------------
include ${srcdir}/MakeList
RECURSIVE_TARGETS = all install clean depend makefiles
#-----------------------------------------------------------------------------
${RECURSIVE_TARGETS:%=%-recursive}: %-recursive:
	for i in ${SUBDIRS}; do \
	  $(MAKE) -C $${i} $* || exit 1; \
	done
#-----------------------------------------------------------------------------
${RECURSIVE_TARGETS}: %: %-recursive
#-----------------------------------------------------------------------------
check: all
	${MAKE} -C tests check
#-----------------------------------------------------------------------------
retest: check-git
	${MAKE} -f Makefile $@
#-----------------------------------------------------------------------------
.PHONY: ${RECURSIVE_TARGETS} ${RECURSIVE_TARGETS:%=%-recursive} \
        install install-here check all
